Company Admin & User Dashboard â€“ Issue
ğŸ§© COMPANY ADMIN SECTION
1ï¸âƒ£ Total User & Reports Calculation Bug

Issue:

Total user count shows users from all companies.

Total report count also shows all reports instead of only that companyâ€™s.

Required Fix:

Filter both counts by company_id.

Display only users and reports belonging to the current adminâ€™s company.

Expected Behavior:

Each company admin can view only their own:

Total users

Total reports

2ï¸âƒ£ Admin Assigned Task

Issues:

â€œAdd Taskâ€ popup cannot fetch company member names.

â€œAnnouncements / Communication Centerâ€ also fails to show company users.

Required Fix:

Fetch users with:
WHERE company_id = admin.company_id AND role = 'user'

Only companyâ€™s internal members should appear in dropdowns for:

Assign Task

Announcements

Expected Behavior:

Admin can assign tasks and announcements to users of their own company only.

3ï¸âƒ£ Buy More (Slots Purchase System)

Current Problems:

Popup does not dynamically calculate slot prices.

After payment, slots do not auto-allocate (requires page refresh).

Super Admin cannot view purchased slot details.

Payment receipt is not auto-downloaded or emailed.

Required Fix Flow:

Popup Behavior:

When admin clicks â€œBuy Moreâ€, show popup to select slot type:

Admin slots

Member slots

Auto-update total amount dynamically.

After Payment Success:

Instantly update available slot count (no page refresh).

Save payment details:

Company ID

Number of slots purchased

Payment amount

Date & time

Super Admin Integration:

Display all company purchase logs with:

Company name

Slots purchased (Admin/User)

Amount

Date

Receipt Handling:

Auto-generate and download payment receipt.

Auto-send same receipt to companyâ€™s registered email.

Expected Behavior:

Real-time slot allocation after payment.

Super Admin can track all slot purchases.

Email + Auto PDF receipt instantly triggered.

ğŸ§­ USER DASHBOARD SECTION
1ï¸âƒ£ Reports

Status: Working fine â€” admin receives reports correctly.

2ï¸âƒ£ Task Assignment

Issue:
Admin cannot assign tasks to specific users of their company.